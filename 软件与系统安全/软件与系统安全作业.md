# 第一次作业

编写一个release版本的 hello world 程序。通过修改程序可执行文件的方式（不是修改源代码），使得程序运行后显示的内容不为hello world，变成 hello cuc！

提示：一定要在编译选项中将调试信息相关的编译连接选项去掉，否则程序体积会比较大，而且存在很多“干扰”信息。

第一步：代码内容如下 保存为1.c文件

![](/软件与系统安全/1.jpg)

第二步：编译链接  

`cl /c 1.c `

 `link /ENTRY:main /ALIGN:16 User32.lib 1.obj `

生成1.exe 

![](/软件与系统安全/2.jpg)

第三步：使用 winhex软件直接打开1.exe 找到 hello world 修改成 Hello CUC

![](/软件与系统安全/3.jpg)

第四步：重新运行1.exe,```Hello world ```成功显示为``` Hello CUC```

![](/软件与系统安全/4.jpg)

# 第二次

上一题的程序中，修改的显示内容变为一个很长的字符串（至少2kb长）。并且保证程序正常运行不崩溃。

提示，可执行文件中原有的空间有限，必须要新加入数据，加入数据后必须要修改.text字段中的指针。


使用上一题中生成的可执行文件

反汇编：dumpbin /disasm 1.exe

![](/软件与系统安全/6.jpg)

其中 `1400003f0h` 对应 `标题`，`1400003f8h` 对应 `Hello world`

查看PE文件头信息（以下省略区块表）：`dumpbin /headers /nologo xxx.exe`

![](/软件与系统安全/5.jpg)

从输出得知基地址(ImageBase)为 `1400000h` ，计算出字符串 `Text` 的地址为 `1400003f0h-1400000h=3f0h`，字符串 `Hello world` 的地址为`1400003f8h-1400000h=3f8h`。